services:
  step1:
    build: step1_epi_data/
    command:
      - /bin/sh
      - -c
      - |
        echo " ---> Go to the Exec panel and type START" 
        sleep infinity
    volumes:
      - ./CONFIDENTIAL_investigators:/data/
      - ./step1_epi_data/files:/files/
      - ./step1_epi_data:/app/
    container_name: M_Step1_Epi_data

  step2:
    build: step2_sequencing/
    command:
      - /bin/sh
      - -c
      - |
        echo " ---> Go to the Exec panel and type START" 
        sleep infinity
    stdin_open: true 
    tty: true
    volumes:
      - ./CONFIDENTIAL_investigators:/data/
      - ./step2_sequencing/files:/files/
      - ./step2_sequencing:/app/
    container_name: M_Step2_Sequencing

  step3:
    build: step3_model_design/
    entrypoint: 
      - /bin/sh
      - -c
      - |
        echo " ---> Go to the Exec panel and type START" 
        sleep infinity
    stdin_open: true 
    tty: true
    volumes:
      - ./CONFIDENTIAL_investigators:/data/
      - ./step3_model_design/files:/files/
      - ./step3_model_design:/app/
    container_name: M_Step3_Model_design

  step4:
    build: step4_beast_analysis/
    entrypoint: 
      - /bin/sh
      - -c
      - |
        echo " ---> Go to the Exec panel and type START" 
        sleep infinity
    stdin_open: true 
    tty: true
    volumes:
      - ./CONFIDENTIAL_investigators:/data/
      - ./step4_beast_analysis/files:/files/
      - ./step4_beast_analysis:/app/
    container_name: M_Step4_BEAST2_analysis

  step5:
    build: step5_press_conference/
    entrypoint: 
      - /bin/sh
      - -c
      - |
        echo " ---> Go to the Exec panel and type START" 
        sleep infinity
    stdin_open: true 
    tty: true
    volumes:
      - ./CONFIDENTIAL_investigators:/data/
      - ./step5_press_conference/files:/files/
      - ./step5_press_conference:/app/
    container_name: M_FinalStep_Press_conference

  # docker compose up -d
